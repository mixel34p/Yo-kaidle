(()=>{var t=[,(t,e,o)=>{var r=o(2);t.exports=function(t,e,o){return(e=r(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t},t.exports.__esModule=!0,t.exports.default=t.exports},(t,e,o)=>{var r=o(3).default,i=o(4);t.exports=function(t){var e=i(t,"string");return"symbol"===r(e)?e:String(e)},t.exports.__esModule=!0,t.exports.default=t.exports},t=>{function e(o){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(o)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},(t,e,o)=>{var r=o(3).default;t.exports=function(t,e){if("object"!==r(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,e||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports}],e={};function o(r){var i=e[r];if(void 0!==i)return i.exports;var n=e[r]={exports:{}};return t[r](n,n.exports,o),n.exports}(()=>{var t=o(1);function e(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function r(o){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?e(Object(i),!0).forEach((function(e){t(o,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(i,t))}))}return o}self.addEventListener("push",(t=>{console.log("[SW Push] Push event received");let e={title:"¡Nuevo Yo-kai disponible!",body:"¡Un nuevo desafío diario te espera! ¿Podrás adivinar el Yo-kai de hoy?",icon:"/icons/icon-192.png",badge:"/icons/icon-192.png",tag:"daily-yokai",url:"/"};if(t.data)try{const o=t.data.json();e=r(r({},e),o)}catch(o){console.log("[SW Push] Could not parse push data as JSON, using text"),e.body=t.data.text()||e.body}const o={body:e.body,icon:e.icon||"/icons/icon-192.png",badge:e.badge||"/icons/icon-192.png",tag:e.tag||"yokaidle-notification",requireInteraction:!1,vibrate:[200,100,200],data:{url:e.url||"/",timestamp:Date.now(),type:e.type||"daily-yokai"},actions:[{action:"play",title:"¡Jugar ahora!"},{action:"dismiss",title:"Más tarde"}]};t.waitUntil(self.registration.showNotification(e.title,o))})),self.addEventListener("notificationclick",(t=>{var e;if(console.log("[SW Push] Notification click received"),t.notification.close(),"dismiss"===t.action)return;const o=(null===(e=t.notification.data)||void 0===e?void 0:e.url)||"/";t.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then((t=>{for(const e of t)if(e.url.includes(self.registration.scope)&&"focus"in e)return e.navigate(o),e.focus();if(clients.openWindow)return clients.openWindow(o)})))})),self.addEventListener("notificationclose",(t=>{console.log("[SW Push] Notification closed by user")})),self.addEventListener("message",(t=>{t.data&&"SKIP_WAITING"===t.data.type&&self.skipWaiting(),t.data&&"CHECK_PUSH_SUBSCRIPTION"===t.data.type&&self.registration.pushManager.getSubscription().then((e=>{t.ports[0].postMessage({type:"PUSH_SUBSCRIPTION_STATUS",isSubscribed:!!e,subscription:e})}))})),console.log("[SW Push] Push notification handlers loaded")})()})();